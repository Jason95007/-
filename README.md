# 智慧循跡避障自走車專案

## 專案簡介

本專案為一台具備循跡、避障、聲音播放與燈號控制功能的智慧小車，使用 Arduino 平台開發。小車能根據紅外線循跡感測器判斷路徑，並利用超音波感測器偵測前方障礙物，遇障礙時會自動停止。小車同時具備音樂播放與多組 LED 車燈控制。

## 硬體腳位對應

- 馬達控制：
  - 左馬達：ENA(D3), IN1(D2), IN2(D4)
  - 右馬達：ENB(D6), IN3(D5), IN4(D7)
- 循跡感測器：
  - 左感測器：D10
  - 右感測器：D11
- 超音波感測器：
  - Trig：D12
  - Echo：D13
- 車燈：
  - 右前燈：SDA
  - 右後燈：SCL
  - 左前燈：D1
  - 左後燈：D0
- 音頻輸出：DAC
- 音頻燈光：A1、A2

## 主要功能區塊

### 1. 音樂播放

- 使用 `analogWave` 類別控制 DAC 輸出音頻。
- 以 `melody` 與 `rhythm` 陣列定義樂曲音高與節奏。
- `playMelodyStep()` 函式負責逐步播放旋律，並同步控制 LED 指示燈。

### 2. 馬達控制

- `Forward()`：小車前進
- `turnLeft()`：左轉
- `turnRight()`：右轉
- `StopMotors()`：停止所有馬達

### 3. 車燈控制

- `KI()`：所有方向燈熄滅（除錯用）
- `Fo()`：頭燈開啟
- `left()`：左轉燈閃爍
- `right()`：右轉燈閃爍
- `Stop()`：煞車燈亮起

### 4. 感測器讀取與避障

- 讀取紅外線循跡感測器判斷路徑。
- 透過超音波模組偵測障礙物，距離小於 7 公分時自動停止並亮起煞車燈。

### 5. 主迴圈邏輯

- 依據感測器數值決定小車行進方向（左轉、右轉、直行、停止）。
- 每次循環都會呼叫 `playMelodyStep()` 播放音樂。

## 程式架構說明

- [`sketch_jun10c.ino`](c:/Users/user/OneDrive%20-%20%E9%80%A2%E7%94%B2%E5%A4%A7%E5%AD%B8/%E6%A1%8C%E9%9D%A2/sketch_jun10c/sketch_jun10c.ino)：主程式，包含所有功能實作。
- `analogWave.h`：音頻輸出控制（需自行提供或安裝相關函式庫）。

## 使用方式

1. 將程式燒錄至 Arduino 板。
2. 依照腳位對應連接硬體。
3. 通電後小車會自動開始循跡、避障、播放音樂與控制燈號。

---

如需進一步擴充功能，請參考程式內各函式區塊註解。
